# 前言
>不知道陌生方法的返回值？debug到当前代码，然后查看该对象的方法中有哪些返回的是 目标类型。  
## 如何快速上手新技术
1. 搞清楚业务的执行流程；
2. 搞清楚你现在写的类，处于这个流程的哪一步。

## spring使用心得
非spring自带的框架（不是工具类），使用时基本上都要编写配置类——继承该框架的一个主类，然后再返回**实现某项功能的对象**。跨域和FastJson比较特殊，他们本质上是对请求和响应进行统一的处理，属于javaWeb自带的功能，所以他们统一写在 WebConfig配置类或xml配置文件中。  
<br/><br/>



# 1 相关技术
## 1.1 Spring security
### 1.1.1 框架的权限认证过程
1. 我们要使用Spring security的身份认证功能；  
2. AuthenticationManager对象是：Spring Security提供的实现了默认认证和授权的类。使用该类后就能自定义"身份认证逻辑","全局安全过滤逻辑","url访问权限逻辑"；  
3. AuthenticationManager对象的 身份认证功能 **方法的调用链（执行流层）为**：
```java
// 调用链
1. AuthenticationManager.authenticate() -->
2. ProviderManager.authenticate() -->
3. DaoAuthenticationProvider(AbstractUserDetailsAuthenticationProvider).authenticate() -->
4. UserDetailsService.loadUserByUsername()返回UserDetails对象 -->
5. DaoAuthenticationProvider对象依据拿到的UserDetails对密码校验，校验成功就构造一个认证过的 UsernamePasswordAuthenticationToken 对象放入 SecurityContext.
```
  
使用Spring security的身份认证功能，**我们需要做的事有**：
1. 创建AuthenticationManager对象：我们需要创建Spring security配置对象，然后把@Bean添加到返回AuthenticationManager对象的方法上；  
2. 调用链1中，AuthenticationManager.authenticate()需要传入UsernamePasswordAuthenticationToken对象：我们需要在service中创建该对象，创建时把封装好的用户信息传进去；  
3. 调用链4中，UserDetailsService和UserDetails都是接口：
   1. 我们需要编写一个service实现该UserDetailsService的loadUserByUsername()方法，实现内容为根据用户名查询用户信息，然后把信息封装成UserDetails对象并返回  
   2. 同时编写一个类实现UserDetails的各种方法  
>注：Spring security会自动进行密码校验，我们要做的是配置密码的加密秘规则（怎么配置后面再说）



# 2 优化
## 2.1 模型类的使用
原因：项目直接在service层返回了xxx。个人人为还是不合适的，因为使用xxx对象封装数据属于前后端交互的过程，而这个过程应该由controller负责实现。  

改进：把service的返回类型改为了```List<Dto>```。
<br/><br/><br/>



